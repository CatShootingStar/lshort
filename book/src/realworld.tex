% !TEX root = ./lshort.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Contents: Typesetting Part of LaTeX2e Introduction
% $Id$
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Real World \LaTeX{}}

\begin{intro}
  After reading the previous chapter, you should have some general idea
  about \LaTeX{}. This chapter
  will fill in the remaining structure you will need to know in order
  to produce real world documents.
\end{intro}

\section{The Structure of Text and Language}
\secby{Hanspeter Schmid}{hanspi@schmid-werren.ch}
The main point of writing a text, is to convey ideas, information, or
knowledge to the reader.  The reader will understand the text better
if these ideas are well-structured, and will see and feel this
structure much better if the typographical form reflects the logical
and semantic structure of the content.

\LaTeX{} is different from other typesetting systems in that you just
have to tell it the logical and semantic structure of a text.  It
then derives the typographical form of the text according to the
``rules'' given in the document class file and in various style files.

The most important text unit in \LaTeX{} (and in typography) is the
\wi{paragraph}.  We call it ``text unit'' because a paragraph is the
typographical form that should reflect one coherent thought, or one idea.
You will learn in the following sections how to force line breaks with
e.g.\ \texttt{\bs\bs}, and paragraph breaks with e.g.\ leaving an empty line
in the source code.  Therefore, if a new thought begins, a new paragraph
should begin, and if not, only line breaks should be used.  If in doubt
about paragraph breaks, think about your text as a conveyor of ideas and
thoughts.  If you have a paragraph break, but the old thought continues, it
should be removed.  If some totally new line of thought occurs in the same
paragraph, then it should be broken.

Most people completely underestimate the importance of well-placed
paragraph breaks.  Many people do not even know what the meaning of
a paragraph break is, or, especially in \LaTeX, introduce paragraph
breaks without knowing it.  The latter mistake is especially easy to
make if equations are used in the text.  Look at the following
examples, and figure out why sometimes empty lines (paragraph breaks)
are used before and after the equation, and sometimes not.  (If you
don't yet understand all commands well enough to understand these
examples, please read this and the following chapter, and then read
this section again.)

\begin{code}
\begin{verbatim}
% Example 1
\ldots when Einstein introduced his formula
\begin{equation}
  e = m \cdot c^2 \; ,
\end{equation}
which is at the same time the most widely known
and the least well understood physical formula.


% Example 2
\ldots from which follows Kirchhoff's current law:
\begin{equation}
  \sum_{k=1}^{n} I_k = 0 \; .
\end{equation}

Kirchhoff's voltage law can be derived \ldots


% Example 3
\ldots which has several advantages.

\begin{equation}
  I_D = I_F - I_R
\end{equation}
is the core of a very different transistor model. \ldots
\end{verbatim}
\end{code}

The next smaller text unit is a sentence.  In English texts, there is
a larger space after a period that ends a sentence than after one
that ends an abbreviation.  \LaTeX{} tries to figure out which one
you wanted to have.  If \LaTeX{} gets it wrong, you must tell it what
you want.  This is explained later in this chapter.

The structuring of text even extends to parts of sentences.  Most
languages have very complicated punctuation rules, but in many
languages (including German and English), you will get almost every
comma right if you remember what it represents: a short stop in the
flow of language.  If you are not sure about where to put a comma,
read the sentence aloud and take a short breath at every comma.  If
this feels awkward at some place, delete that comma; if you feel the
urge to breathe (or make a short stop) at some other place, insert a
comma.

Finally, the paragraphs of a text should also be structured logically
at a higher level, by putting them into chapters, sections,
subsections, and so on.  However, the typographical effect of writing
e.g.\ \verb|\section{The| \texttt{Structure of Text and Language}\verb|}| is
so obvious that it is almost self-evident how these high-level
structures should be used.

\section{Line Breaking and Page Breaking}

\subsection{Justified Paragraphs}

Books are often typeset with each line having the same length.
\LaTeX{} inserts the necessary \wi{line break}s and spaces between words
by optimizing the contents of a whole paragraph. If necessary, it
also hyphenates words that would not fit comfortably on a line.
How the paragraphs are typeset depends on the document class.
Normally the first line of a paragraph is indented, and there is no
additional space between two paragraphs. Refer to Section~\ref{parsp}
for more information.

In special cases it might be necessary to order \LaTeX{} to break a
line:
\begin{lscommand}
  \ci*{\bs}[length:o] or \ci{newline}
\end{lscommand}
starts a new line without starting a new paragraph. The optional \carg{length}
argument adds additional space after the line.

\begin{lscommand}
  \ci*{\bs*}[length:o]
\end{lscommand}
additionally prohibits a page break after the forced line break.

\begin{lscommand}
  \ci{newpage}
\end{lscommand}
starts a new page.

\begin{lscommand}
  \ci{linebreak}\verb|[|\emph{n}\verb|]|,
  \ci{nolinebreak}\verb|[|\emph{n}\verb|]|,
  \ci{pagebreak}\verb|[|\emph{n}\verb|]|,
  \ci{nopagebreak}\verb|[|\emph{n}\verb|]|
\end{lscommand}
suggest places where a break may (or may not) happen.
They enable the author to influence their
actions with the optional argument \emph{n}, which can be set to a number
between zero and four. By setting \emph{n} to a value below 4, you leave
\LaTeX{} the option of ignoring your command if the result would look very
bad. Do not confuse these ``break'' commands with the ``new'' commands. Even
when you give a ``break'' command, \LaTeX{} still tries to even out the
right border of the line and the total length of the page, as described in
the next section; this can lead to unpleasant gaps in your text.
If you really want to start a ``new line'' or a ``new page'', then use the
corresponding command. Guess their names!
\begin{example}[examplewidth=0.4\linewidth]
  Lorem ipsum dolor sit amet,\\
  consectetur adipiscing elit,\\[1cm]
  sed do eiusmod tempor\linebreak
  incididunt ut labore\linebreak[1]
  et dolore magna aliqua. Ut enim
  ad minim veniam, quis \linebreak[3]
  nostrud exercitation ullamco laboris
  nisi ut aliquip\linebreak
   ex ea commodo consequat. 
\end{example}

\LaTeX{} always tries to produce the best line breaks possible. If it
cannot find a way to break the lines in a manner that meets its high
standards, it lets one line stick out on the right of the paragraph.
\LaTeX{} then complains (``\wi{overfull hbox}'') while processing the
input file. This happens most often when \LaTeX{} cannot find a
suitable place to hyphenate a word.\footnote{Although \LaTeX{} gives
  you a warning when that happens (\texttt{Overfull \bs{}hbox}) and displays the
  offending line, such lines are not always easy to find. If you use
  the option \texttt{draft} in the \ci{documentclass} command, these
  lines will be marked with a thick black line on the right margin.}
Instruct \LaTeX{} to lower its standards a little by giving
the \ci{sloppy} command. It prevents such over-long lines by
increasing the inter-word spacing---even if the final output is not
optimal.  In this case a warning (``\wi{underfull hbox}'') is given to
the user.  In most such cases the result doesn't look very good. The
command \ci{fussy} brings \LaTeX{} back to its default behaviour.

\subsection{Hyphenation}\label{hyph}

\LaTeX{} hyphenates words whenever necessary. If the hyphenation
algorithm does not find the correct hyphenation points,
remedy the situation by using the following commands to tell \TeX{}
about the exception.

The command
\begin{lscommand}
  \ci{hyphenation}\verb|{|\emph{word list}\verb|}|
\end{lscommand}
\noindent causes the words listed in the argument to be hyphenated only at
the points marked by ``\verb|-|''.  The argument of the command should only
contain words built from normal letters, or rather signs that are considered
to be normal letters by \LaTeX{}. The hyphenation hints are
stored for the language that is active when the hyphenation command
occurs. This means that if you place a hyphenation command into the preamble
of your document it will influence the English language hyphenation. If you
place the command after the \verb|\begin{document}| and you are using some
package for national language support like \pai{polyglossia}, then the hyphenation
hints will be active in the language activated through \pai{polyglossia}.

The example below will allow ``hyphenation'' to be hyphenated as well as
``Hyphenation'', and it prevents ``FORTRAN'', ``Fortran'' and ``fortran''
from being hyphenated at all.  No special characters or symbols are allowed
in the argument.

Example:
\begin{code}
\verb|\hyphenation{FORTRAN Hy-phen-a-tion}|
\end{code}

The command \ci{-} inserts a discretionary hyphen into a word. This
also becomes the only point hyphenation is allowed in this word. This
command is especially useful for words containing special characters
(e.g.\ accented characters), because \LaTeX{} does not automatically
hyphenate words containing special characters.
%\footnote{Unless you are using the new
%\wi{DC fonts}.}.

\begin{example}
I think this is: su\-per\-cal\-%
i\-frag\-i\-lis\-tic\-ex\-pi\-%
al\-i\-do\-cious
\end{example}

Several words can be kept together on one line with the command
\begin{lscommand}
  \ci{mbox}\verb|{|\emph{text}\verb|}|
\end{lscommand}
\noindent It causes its argument to be kept together under all circumstances.

\begin{example}
My phone number will change soon.
It will be \mbox{0116 291 2319}.

The parameter
\mbox{\emph{filename}} should
contain the name of the file.
\end{example}

\ci{fbox} is similar to \ci{mbox}, but in addition there will
be a visible box drawn around the content.


\section{Ready-Made Strings}

In some of the examples on the previous pages, you have seen
some very simple \LaTeX{} commands for typesetting special
text strings:

\begin{center}
  \begin{tabular}{@{}lll@{}}
    \toprule
    Command     & Example   & Description              \\
    \midrule
    \ci{today}  & \today    & Current date             \\
    \ci{TeX}    & \TeX{}    & Your favorite typesetter \\
    \ci{LaTeX}  & \LaTeX{}  & The Name of the Game     \\
    \ci{LaTeXe} & \LaTeXe{} & The current incarnation  \\
    \bottomrule
  \end{tabular}
\end{center}

\section{Special Characters and Symbols}

\subsection{Quotation Marks}

You should \emph{not} use the \verb|"| for \wi{quotation marks}%
\index{""@\texttt{""}} as you would when using a WYSIWYG program.  In publishing
there are special opening and closing quotation marks.  In \LaTeX{},
use two~\textasciigrave~(grave accent) for opening quotation marks and
two~\textquotesingle~(vertical quote) for closing quotation marks. For single
quotes you use just one of each.
\begin{example}
``Please press the `x' key.''
\end{example}
Yes I know the rendering is not ideal, it's really a back-tick or grave accent
(\textasciigrave) for
opening quotes and vertical quote (\textquotesingle) for closing, despite what the font chosen might suggest.

This is not to indicate that we never type \verb|"|. One reason to use this is
when you need to display a letter with an umlaut. We cover displaying
special characters such as these in Section 2.4.9.
\subsection{Dashes and Hyphens}

\LaTeX{} knows four kinds of \wi{dash}es. Access three of
them with different number of consecutive dashes. The fourth sign
is actually not a dash at all---it is the mathematical minus sign:\index{-}%
\index{--}\index{---}\index{-@$-$}\index{mathematical!minus}

\begin{example}
daughter-in-law, X-rated\\
pages 13--67\\
yes---or no? \\
$0$, $1$ and $-1$
\end{example}
The names for these dashes are:
`-' \wi{hyphen}, `--' \wi{en-dash}, `---' \wi{em-dash} and
`$-$' \wi{minus sign}.

\subsection{Tilde (\(\sim\))}%
\index{URL link}\index{tilde}
A character often seen in web addresses is the tilde. To generate
this in \LaTeX{} use \verb|\~{}| but the result (\~{}) is not really
what you want. Try this instead:

\begin{example}
http://www.rich.edu/\~{}bush \\
http://www.clever.edu/$\sim$demo
\end{example}

\subsection{Slash (/)}%
\index{Slash}
In order to typeset a slash between two words, one can simply type e.g.\
\texttt{read/write}, but this makes \LaTeX{} treat the two words as one.
Hyphenation is disabled for these two words, so there may be `overfull'
errors.  To overcome this, use \ci{slash}.  For example type
`\verb|read\slash write|' which allows hyphenation.  Normal `\texttt{/}'
character may be still used for inline fractions. Typesetting units,
such as \unit[per-mode = symbol]{\mebi\byte\per\s}, will be described in
Section~\ref{sec:units}.

\subsection{The Euro Currency Symbol \texorpdfstring{(\officialeuro)}{}}

When writing about money these days, you need the Euro symbol. Many current
fonts contain a Euro symbol. After loading the \pai{textcomp} package in the preamble of your document
\begin{lscommand}
  \ci{usepackage}\verb|{textcomp}|
\end{lscommand}
use the command
\begin{lscommand}
  \ci{texteuro}
\end{lscommand}
to access it.

If your font does not provide its own Euro symbol or if you do not like the
font's Euro symbol, you have two more choices:

First the \pai{eurosym} package. It provides the official Euro symbol:
\begin{lscommand}
  \ci{usepackage}\verb|[|\emph{official}\verb|]{eurosym}|
\end{lscommand}
If you prefer a Euro symbol that matches your font, use the option
\texttt{gen} in place of the \texttt{official} option.

%If the Adobe Eurofonts are installed on your system (they are available for
%free from \url{ftp://ftp.adobe.com/pub/adobe/type/win/all}) you can use
%either the package \pai{europs} and the command \ci{EUR} (for a Euro symbol
%that matches the current font).
% does not work
% or the package
% \pai{eurosans} and the command \ci{euro} (for the ``official Euro'').

%The \pai{marvosym} package also provides many different symbols, including a
%Euro, under the name \ci{EURtm}. Its disadvantage is that it does not provide
%slanted and bold variants of the Euro symbol.

\begin{table}[!htbp]
  \centering
  \caption[Available Euro symbols]{The appearance of available Euro symbols based
    on the loaded package and the used font.}\label{eurosymb}
  \begin{tabular}{@{}llccc@{}}
    \toprule
                     &                               & \multicolumn{3}{c}{Symbol used}                                             \\
    \cmidrule(l){3-5}
    Package          & Command                       & Roman                           & Sans serif                    & Monospace \\
    \midrule
    LM+textcomp      & \ci{texteuro}                 & \huge\texteuro{}                & \huge\sffamily\texteuro{}
                     & \huge\ttfamily\texteuro{}                                                                                   \\
    eurosym          & \ci{euro}                     & \huge\officialeuro{}            & \huge\sffamily\officialeuro{}
                     & \huge\ttfamily\officialeuro{}                                                                               \\
    $[$gen$]$eurosym & \ci{euro}                     & \huge\geneuro{}                 & \huge\sffamily\geneuro{}
                     & \huge\ttfamily\geneuro{}                                                                                    \\
    %europs       &\verb+\EUR + & \huge\EURtm        &\huge\EURhv
    %                                                &\huge\EURcr\\
    %eurosans     &\verb+\euro+ & \huge\EUROSANS  &\huge\sffamily\EUROSANS
    %                                             & \huge\ttfamily\EUROSANS \\
    %marvosym     &\verb+\EURtm+  & \huge\mvchr101  &\huge\mvchr101
    %                                               &\huge\mvchr101
    \bottomrule
  \end{tabular}
  \medskip
\end{table}

\subsection{Ellipsis (\ldots)}

On a typewriter, a \wi{comma} or a \wi{period} takes the same amount of
space as any other letter. In book printing, these characters occupy
only a little space and are set very close to the preceding letter.
Therefore, entering `\wi{ellipsis}' by just typing three
dots would produce the wrong result. Instead, there is a special
command for these dots. It is called

\begin{lscommand}
  \ci{ldots} (low dots)
\end{lscommand}%
\index{...@\ldots}

\begin{chktexignore}
  \begin{example}
Not like this ... but like this:\\
New York, Tokyo, Budapest, \ldots
\end{example}
\end{chktexignore}

\subsection{Ligatures}

Some letter combinations are typeset not just by setting the
different letters one after the other, but by actually using special
symbols.
\begin{code}
{\large ff fi fl ffi\ldots}\quad
instead of\quad {\large f\mbox{}f f\mbox{}i f\mbox{}l f\mbox{}f\mbox{}i \ldots}
\end{code}
These so-called \wi{ligature}s can be prohibited by inserting an \ci{mbox}\verb|{}|
between the two letters in question. This might be necessary with
words built from two words.

\begin{example}
\Large Not shelfful\\
but shelf\mbox{}ful
\end{example}

\subsection{Accents and Special Characters}

\LaTeX{} supports the use of \wi{accent}s and \wi{special character}s
from many languages. Table~\ref{accents} shows all sorts of accents
being applied to the letter o. Naturally other letters work too.

To place an accent on top of an i or a j, its dots have to be
removed. This is accomplished by typing \verb|\i| and \verb|\j|.
\begin{chktexignore}
  \begin{example}
H\^otel, na\"\i ve, \'el\`eve,\\
sm\o rrebr\o d, !`Se\~norita!,\\
Sch\"onbrunner Schlo\ss{}
Stra\ss e
\end{example}
\end{chktexignore}
\begin{table}[!hbp]
  \centering
  \caption{Accents and Special Characters.}\label{accents}
  \begin{tabular}{@{}*3{ll@{\qquad}}ll@{}}
    \toprule
    Code         & Effect       & Code          & Effect       & Code & Effect    & Code & Effect \\
    \midrule
    \mstA{\`o}   & \mstA{\'o}   & \mstA{\^o}    & \mstA{\~o}                                      \\
    \mstA{\=o}   & \mstA{\.o}   & \mstA{\"o}    & \mstB{\c}{c}                                    \\[6pt]
    \mstB{\u}{o} & \mstB{\v}{o} & \mstB{\H}{o}  & \mstB{\c}{o}                                    \\
    \mstB{\d}{o} & \mstB{\b}{o} & \mstB{\t}{oo} &              &                                  \\[6pt]
    \mstA{\oe}   & \mstA{\OE}   & \mstA{\ae}    & \mstA{\AE}                                      \\
    \mstA{\aa}   & \mstA{\AA}   &               &              &      &                           \\[6pt]
    \mstA{\o}    & \mstA{\O}    & \mstA{\l}     & \mstA{\L}                                       \\
    \mstA{\i}    & \mstA{\j}    & !`            & \verb|!`|    & ?`   & \verb|?`|                 \\ %chktex 26
    \bottomrule
  \end{tabular}%
  \index{dotless \i{} and \j}\index{Scandinavian letters}%
  \index{ae@\ae}\index{umlaut}\index{grave}\index{acute}%
  \index{oe@\oe}\index{aa@\aa}

  \bigskip
\end{table}

\section{International Language Support}
\secby{Axel Kielhorn}{A.Kielhorn@web.de}%
\index{international} When you write documents in \wi{language}s
other than English, there are three areas where \LaTeX{} has to be
configured appropriately:

\begin{enumerate}
  \item All automatically generated text strings (\enquote{Table of Contents},
        \enquote{List of Figures}, \ldots) have to be adapted to the new language.
  \item \LaTeX{} needs to know the hyphenation rules for the current language.
  \item Language specific typographic rules. In French for example, there is a
        mandatory space before each colon character (:).
\end{enumerate}

Also entering text in your language of choice might be a bit cumbersome using
all the commands from figure~\ref{accents}. To overcome this problem, until
recently you had to delve deep into the abyss of language specific encodings
both for input as well as fonts. These days, with modern \TeX{} engines
speaking UTF-8 natively, these problems have relaxed considerably.

The package \pai*{polyglossia} is a replacement for the venerable \pai{babel}
package. It takes care of the hyphenation patterns and automatically generated
text strings in your documents. Polyglossia works only with \hologo{XeTeX}
and \hologo{LuaTeX} engines.

\subsection{Polyglossia Usage}

So far there has been no advantage to using a Unicode \hologo{TeX} engine. This
changes when we leave English and move to a language that uses non-Latin
alphabet like Greek or Russian. With a Unicode based system, you can
simply\footnote{For small values of simple.} enter the native characters in
your editor and \hologo{TeX} will understand them.

Writing in different languages is easy, just load the \pai{polyglossia} package
and specify the languages in the preamble using
\begin{lscommand}
  \ci{setdefaultlanguage}[options][language] \\
  \ci{setotherlanguage}[options][language]
\end{lscommand}
where \carg{language} is either the name of the language to use such as
\cargv{gaelic} or \cargv{japanese}, or its BCP-47 tag such as \cargv{de-CH} or
\cargv{ru-luna1918}. When specifying language via its name you may pass
additional \carg{options} to decide between its variants for example
\cargv{variant=british} or \cargv{script=Arabic}. Note that when loading a
language, either via tag or with options, all variants are loaded and the
tag\slash{}options specified are just the defaults. For a full list of supported
languages and variants see the \pai{polyglossia} package documentation.

To write a paragraph in German, you can use the \ei{german} environment:

\begin{example}
%!showbegin !hide
% In the preamble
\setdefaultlanguage{english}
\setotherlanguage{german}
% ...
%!showend !hide
\year=3022 \month=1 \day=19 %!hide
Today is not \today.

\begin{german}
  Heute ist nicht \today.
\end{german}
\end{example}

You may also use \ei{lang} environment that accepts the \carg{language} as its
first argument. This is especially useful if you prefer to specify the language
via BCP-47 tag since environment names cannot contain the
\enquote*{\texttt{-}} symbol.

\begin{example}
\year=3022 \month=1 \day=19 %!hide
\begin{lang}{de-AT}
  Heute ist nicht \today.
\end{lang}
\end{example}

You can also pass \carg{options} as an optional argument to the environment.

\begin{example}
\year=3023 \month=8 \day=17 %!hide
\begin{german}[script=blackletter]
  Heute ist nicht \today.
\end{german}
\end{example}

If you just need a word or a short phrase in a foreign language you can use
either the
\begin{lscommand}
  \ci*{text\textit{language}}[options:o ! text:m]
\end{lscommand}
or the
\begin{lscommand}
  \ci*{textlang}[options:o ! language:m ! text:m]
\end{lscommand}
command:
\begin{example}[examplewidth=0.33\linewidth]
In Austria they write
\textlang[variant=austrian]{de}{Jänner}
instead of \textgerman{Januar}.
And in the olden days \textlang{de}{August}
was written
\textgerman[script=blackletter]{Auguſt}.
\end{example}

For languages that are not very different from English, the results are not
very impressive. We get correct hyphenation and some context aware commands
such as \ci{today} adjust their output. However the further we stray from
English, the more useful will this commands become.

Sometimes the font used in the main document does not contain glyphs that are
required in the second language. The default Latin Modern font for example does not
contain Cyrillic letters. The solution is to define a custom font that will be used
for that language.

To set the fonts use the command
\begin{lscommand}
  \ci*{newfontfamily}[familyname:M ! options:o ! font:m]
\end{lscommand}
from the \pai{fontspec} package\footnote{\pai{fontspec} is loaded automatically
  by \pai{polyglossia} so you do not need to add it to a the preamble of your
  document.} which is described in much more detail in
Section~\ref{sec:fontspec}.

When changing the text language, \pai{polyglossia} checks whether a font family named
\cargv{\textit{language}font} exists and changes to it if it's available.

If you are happy with the default Latin Modern font, you may want to try the \enquote{CMU} font
which contains some additional Cyrillic or Greek glyphs
while looking nearly identical to Latin Modern.\footnote{Both fonts are
  actually based on the Computer Modern font, designed by Donald Knuth for
  the first \TeX{} versions.}

If you have the CMU font installed in your system (unlikely) or you are using
\hologo{LuaLaTeX} then you can simply write
\begin{verbatim}
\newfontfamily\greekfont{CMU Serif}
\end{verbatim}

If you are using \hologo{XeLaTeX} and don't have the font installed then you
need to specify the font by its file name.
\begin{verbatim}
\newfontfamily\greekfont[
  Extension=.otf, UprightFont=*rm, ItalicFont=*ti,
  BoldFont=*bx, BoldItalicFont=*bi,
]{cmun}
\end{verbatim}

With the appropriate fonts loaded, you can now write:
{
\setmonofont{cmuntt.otf}
\begin{example}[examplewidth=0.4\linewidth]
%!showbegin !hide
% In the preamble (LuaLaTeX)
\setotherlanguage{greek}
\newfontfamily\greekfont{CMU Serif}
\setotherlanguage{russian}
\newfontfamily\russianfont{CMU Serif}
% ...
%!showend !hide

\begin{chktexignore} %!hide
\textrussian{Правда} is
\end{chktexignore} %!hide
a Russian newspaper.
\textlang{greek}{ἀλήθεια} is truth
or disclosure in philosophy.
  \end{example}
}

\LaTeX{} actually uses three different fonts for typesetting documents. The
above commands only set the default serif font used for the body text. The
other fonts are \textsf{sans serif} (used in presentations slides) and
\texttt{monospace} (used when displaying code). In order to adjust the fonts used for
a particular language, define \cargv{\textit{language}fontsf} family for sans serif and
\cargv{\textit{language}fonttt} for monospace. For example, to define CMU as a
font for Greek in all three fonts when using \hologo{LuaLaTeX} you would write
\begin{verbatim}
\newfontfamily\greekfont{CMU Serif}
\newfontfamily\greekfontsf{CMU Sans Serif}
\newfontfamily\greekfonttt{CMU Typewriter Text}
\end{verbatim}
\pagebreak[3]
or in \hologo{XeLaTeX}
\begin{verbatim}
\newfontfamily\greekfont[
  Extension=.otf, UprightFont=*rm, ItalicFont=*ti,
  BoldFont=*bx, BoldItalicFont=*bi,
]{cmun}
\newfontfamily\greekfontsf[
  Extension=.otf, UprightFont=*ss, ItalicFont=*si,
  BoldFont=*sx, BoldItalicFont=*so, 
]{cmun}
\newfontfamily\greekfonttt[
  Extension=.otf, UprightFont=*btl, ItalicFont=*bto,
  BoldFont=*tb, BoldItalicFont=*tx, 
]{cmun}
\end{verbatim}

The commands above redefine the fonts for languages used as \enquote*{other} in
polyglossia. If you want to influence the font of the main document language
use the \ci{setmainfont}, \ci{setsansfont} and \ci{setmonofont} that work the
same way but without the \carg{familyname} argument.
\begin{verbatim}
\setmainfont{CMU Serif}
\setsansfont{CMU Sans Serif}
\setmonofont{CMU Typewriter Text}
\end{verbatim}

If you want to learn even more about fonts, have a look at
Section~\ref{sec:fontspec}.

\subsubsection{Right to Left (RTL) languages}

Some languages are written left to right, others are written right to left
(RTL). \pai{polyglossia} needs the \pai*{bidi} package\footnote{\pai{bidi}
  supports only the \hologo{XeTeX} engine. If you use \hologo{LuaTeX}
  \pai{polyglossia} uses the \pai*{luabidi} package, but keep in mind that it is
  much more limited than \pai{bidi}.} in order to support RTL languages. The
\pai{bidi} package should be the last package you load, even after
\pai{hyperref} which is usually the last package. (Since \pai{polyglossia}
loads \pai{bidi} this means that \pai{polyglossia} should be the last package
loaded.)

\begin{example}[standalone, template=empty, paperheight=4cm]
\documentclass{article}

\usepackage{polyglossia}
\setdefaultlanguage{arabic}
\usepackage[paperheight=\height,paperwidth=\width,margin=1cm,includefoot]{geometry}%!hide 

\begin{document}
This text will be typeset right to left.
\end{document}
\end{example}

The package \pai*{xepersian}\footnote{Works only with
  \hologo{XeLaTeX}.}\index{Persian} offers support for the Persian language. It
supplies Persian \LaTeX-commands that allows you to enter commands like
\ci{section} in Persian, which makes this really attractive to native speakers.
\pai{xepersian} is the only package that supports kashida\index{kashida} with
\hologo{XeLaTeX}. A package for Syriac which uses a similar algorithm is under
development.

To typeset Arabic you may use the IranNastaliq font~\cite{font:IranNastaliq}
developed by the SCICT and updated by Mohammad Saleh Souzanchi.

The \pai*{arabxetex} package supports several languages with
an Arabic script:
\begin{itemize}
  \item arab (Arabic)\index{Arabic}
  \item persian\index{Persian}
  \item urdu\index{Urdu}
  \item sindhi\index{Sindhi}
  \item pashto\index{Pashto}
  \item ottoman (turk)\index{Ottoman}\index{Turkish}
  \item kurdish\index{Kurdish}
  \item kashmiri\index{Kashmiri}
  \item malay (jawi)\index{Malay}\index{Jawi}
  \item uighur\index{Uighur}
\end{itemize}

It offers a font mapping that enables \hologo{XeLaTeX} to process input
using the Arab\TeX{} ASCII transcription.

There is no package available for Hebrew\index{Hebrew} because none is needed.
The Hebrew support in \pai{polyglossia} should be sufficient. But you do need a
suitable font with real Unicode Hebrew. SBL Hebrew~\cite{font:sblhebrew} is a
non-free font available for non-commercial use. Another font, available under
the SIL Open Font License, is Ezra SIL~\cite{font:ezrasil}.

\subsubsection{Chinese, Japanese and Korean (CJK)}%
\index{Chinese}\index{Japanese}\index{Korean}

The package \pai*{xeCJK}\footnote{Works only with
  \hologo{XeLaTeX}.} takes care of font selection and
punctuation for these languages.

\section{The Space Between Words}

To get a straight right margin in the output, \LaTeX{} inserts varying
amounts of space between the words. It inserts slightly more space at
the end of a sentence, as this makes the text more readable.  \LaTeX{}
assumes that sentences end with periods, question marks or exclamation
marks. If a period follows an uppercase letter, this is not taken as a
sentence ending, since periods after uppercase letters normally occur in
abbreviations.

Any exception from these assumptions has to be specified by the
author. A backslash in front of a space generates a space that will
not be enlarged. A tilde~`\verb|~|' character generates a space that cannot be
enlarged and additionally prohibits a line break. The command
\verb|\@| in front of a period specifies that this period terminates a
sentence even when it follows an uppercase letter.
\cih{"@}\index{~@ \verb.~.}\index{tilde@tilde ( \verb.~.)}% chktex 18
\index{., space after}

\begin{example}
Mr.~Smith was happy to see her\\
cf.~Fig.~5\\
I like BASIC\@. What about you?
\end{example}

The additional space after periods can be disabled with the command
\begin{lscommand}
  \ci{frenchspacing}
\end{lscommand}
\noindent which tells \LaTeX{} \emph{not} to insert more space after a
period than after an ordinary character. This is very common in
non-English languages, except bibliographies. If you use
\ci{frenchspacing}, the command \verb|\@| is not necessary.

\section{Titles, Chapters, and Sections}

To help the reader find his or her way through your work, you should
divide it into chapters, sections, and subsections.  \LaTeX{} supports
this with special commands that take the section title as their
argument.  It is up to you to use them in the correct order.

The following sectioning commands are available for the
\texttt{article} class: \nopagebreak

\begin{lscommand}
  \ci{section}\verb|{...}|\\
  \ci{subsection}\verb|{...}|\\
  \ci{subsubsection}\verb|{...}|\\
  \ci{paragraph}\verb|{...}|\\
  \ci{subparagraph}\verb|{...}|
\end{lscommand}

If you want to split your document into parts without influencing the
section or chapter numbering use
\begin{lscommand}
  \ci{part}\verb|{...}|
\end{lscommand}

When you work with the \texttt{report} or \texttt{book} class,
an additional top-level sectioning command becomes available
\begin{lscommand}
  \ci{chapter}\verb|{...}|
\end{lscommand}

As the \texttt{article} class does not know about chapters, it is quite easy
to add articles as chapters to a book.
The spacing between sections, the numbering and the font size of the
titles will be set automatically by \LaTeX.

Two of the sectioning commands are a bit special:
\begin{itemize}
  \item The \ci{part} command does
        not influence the numbering sequence of chapters.
  \item The \ci{appendix} command does not take an argument. It just
        changes the chapter numbering to letters.\footnote{For the article
          style it changes the section numbering.}
\end{itemize}

\LaTeX{} creates a table of contents by taking the section headings
and page numbers from the last compile cycle of the document. The command
\begin{lscommand}
  \ci{tableofcontents}
\end{lscommand}
\noindent expands to a table of contents at the place it
is issued. A new
document has to be compiled (``\LaTeX{}ed'') twice to get a
correct \wi{table of contents}. Sometimes it might be
necessary to compile the document a third time. \LaTeX{} will tell you
when this is necessary.

All sectioning commands listed above also exist as ``starred''
versions.  A ``starred'' version of a command is built by adding a
star \verb|*| after the command name.  This generates section headings
that do not show up in the table of contents and are not
numbered. The command \verb|\section{Help}|, for example, would become
\verb|\section*{Help}|.

Normally the section headings show up in the table of contents exactly
as they are entered in the text. Sometimes this is not possible,
because the heading is too long to fit into the table of contents. The
entry for the table of contents can then be specified as an
optional argument in front of the actual heading.

\begin{code}
\verb|\chapter[Title for the table of contents]{A long|\\
\verb|    and especially boring title, shown in the text}|
\end{code}

The \wi{title} of the whole document is generated by issuing a
\begin{lscommand}
  \ci{maketitle}
\end{lscommand}
\noindent command. The contents of the title have to be defined by the commands
\begin{lscommand}
  \ci{title}\verb|{...}|, \ci{author}\verb|{...}|
  and optionally \ci{date}\verb|{...}|
\end{lscommand}
\noindent before calling \verb|\maketitle|. In the argument to \ci{author}, you can supply several names separated by \ci{and} commands.

An example of some of the commands mentioned above can be found in
Figure~\ref{document} on page~\pageref{document}.

Apart from the sectioning commands explained above, \LaTeXe{}
introduced three additional commands for use with the \verb|book| class.
They are useful for dividing your publication. The commands alter
chapter headings and page numbering to work as you would expect in
a book:
\begin{description}
  \item[\ci{frontmatter}] should be the very first command after
    the start of the document body (\verb|\begin{document}|). It will switch page numbering to Roman
    numerals and sections will be non-enumerated as if you were using
    the starred sectioning commands (e.g.\ \verb|\chapter*{Preface}|)
    but the sections will still show up in the table of contents.
  \item[\ci{mainmatter}] comes right before the first chapter of
    the book. It turns on Arabic page numbering and restarts the page
    counter.
  \item[\ci{appendix}] marks the start of additional material in your
    book. After this command chapters will be numbered with letters.
  \item[\ci{backmatter}] should be inserted before the very last items
    in your book, such as the bibliography and the index. In the standard
    document classes, this has no visual effect.
\end{description}


\section{Cross References}

In books, reports and articles, there are often
\wi{cross-references} to figures, tables and special segments of text.
\LaTeX{} provides the following commands for cross referencing
\begin{lscommand}
  \ci{label}\verb|{|\emph{marker}\verb|}|, \ci{ref}\verb|{|\emph{marker}\verb|}|
  and \ci{pageref}\verb|{|\emph{marker}\verb|}|
\end{lscommand}
\noindent where \emph{marker} is an identifier chosen by the user. \LaTeX{}
replaces \verb|\ref| by the number of the section, subsection, figure,
table, or theorem after which the corresponding \verb|\label| command
was issued. \verb|\pageref| prints the page number of the
page where the \verb|\label| command occurred.\footnote{Note that these commands
  are not aware of what they refer to. \ci{label} just saves the last
  automatically generated number.} As with section titles and page numbers for the table of contents,
the numbers from the previous compile cycle are used.


\begin{example}
A reference to this subsection%
\label{sec:this} looks like:
``see Section~\ref{sec:this} on
page~\pageref{sec:this}.''
\end{example}

\section{Footnotes}
With the command
\begin{lscommand}
  \ci{footnote}\verb|{|\emph{footnote text}\verb|}|
\end{lscommand}
\noindent a footnote is printed at the foot of the current page.  Footnotes
should always be put\footnote{``put'' is one of the most common
  English words.} after the word or sentence they refer to. Footnotes
referring to a sentence or part of it should therefore be put after
the comma or period.\footnote{Note that footnotes
  distract the reader from the main body of your document. After all,
  everybody reads the footnotes---we are a curious species, so why not
  just integrate everything you want to say into the body of the
  document?\footnotemark}
\footnotetext{A guidepost doesn't necessarily go where it's pointing to \smiley.}

\begin{example}
Footnotes\footnote{This is
  a footnote.} are often used
by people using \LaTeX.
\end{example}

\section{Emphasized Words}

If a text is typed using a typewriter, important words are
\texttt{emphasized by \underline{underlining} them.}
\begin{lscommand}
  \ci{underline}\verb|{|\emph{text}\verb|}|
\end{lscommand}
In printed books,
however, words are emphasized by typesetting them in an \emph{italic}
font.  As an author you shouldn't care either way. The important bit is, to tell \LaTeX{} that a
particular bit of text is important and should be emphasized. Hence the command
\begin{lscommand}
  \ci{emph}\verb|{|\emph{text}\verb|}|
\end{lscommand}
\noindent to emphasize text. What the command actually does with
its argument depends on the context:

\begin{example}
\emph{If you use
  emphasizing inside a piece
  of emphasized text, then
  \LaTeX{} uses the
  \emph{normal} font for
  emphasizing.}
\end{example}

If you want control over font and font size, Section~\ref{sec:fontsize} on
page~\pageref{sec:fontsize} might provide some inspiration.

\section{Environments}\label{env}

% To typeset special purpose text, \LaTeX{} defines many different
% \wi{environment}s for all sorts of formatting:
\begin{lscommand}
  \ci{begin}\verb|{|\emph{environment}\verb|}|\quad
  \emph{text}\quad
  \ci{end}\verb|{|\emph{environment}\verb|}|
\end{lscommand}
\noindent Where \emph{environment} is the name of the environment. Environments can be
nested within each other as long as the correct nesting order is
maintained.
\begin{code}
\verb|\begin{aaa}...\begin{bbb}...\end{bbb}...\end{aaa}|
\end{code}

\noindent In the following sections all important environments are explained.

\subsection{Itemize, Enumerate, and Description}

The \ei{itemize} environment is suitable for simple lists, the
\ei{enumerate} environment for enumerated lists, and the
\ei{description} environment for descriptions.
\cih{item}

\begin{example}
\begin{enumerate}
\item You can nest the list
environments to your taste:
\begin{itemize}
\item But it might start to
look silly.
\item[-] With a dash.
\end{itemize}
\item Therefore remember:
\begin{description}
\item[Stupid] things will not
become smart because they are
in a list.
\item[Smart] things, though,
can be presented beautifully
in a list.
\end{description}
\end{enumerate}
\end{example}

\subsection{Non-Justified Text}

By default \LaTeX{} justifies text inside a document. While this is desirable
for the main text there may be occasions where you want the text to be left- or
\wi{right-aligned}\index{left-aligned}. This is where the \pai*{ragged2e}
package is useful. It defines environments
\begin{lscommand}
  \ei{FlushLeft}
  \ei{FlushRight}
  \ei{Center}
\end{lscommand}
which allow you to achieve left-aligned, right-aligned and centered text.

\begin{example}
\begin{FlushLeft}
  This text is\\ left-aligned.
  \LaTeX{} is not trying to make
  each line the same length.
\end{FlushLeft}
\end{example}

\begin{example}
\begin{FlushRight}
  This text is right-\\aligned.
  \LaTeX{} is not trying to make
  each line the same length.
\end{FlushRight}
\end{example}

\begin{example}
\begin{Center}
  At the centre\\of the earth
\end{Center}
\end{example}

\subsection{Quote, Quotation, and Verse}

The \ei{quote} environment is useful for quotes, important phrases and
examples.

\begin{example}
A typographical rule of thumb
for the line length is:
\begin{quote}
On average, no line should
be longer than 66 characters.
\end{quote}
This is why \LaTeX{} pages have
such large borders by default
and also why multicolumn print
is used in newspapers.
\end{example}

There are two similar environments: the \ei{quotation} and the
\ei{verse} environments. The \texttt{quotation} environment is useful
for longer quotes going over several paragraphs, because it indents the
first line of each paragraph. The \texttt{verse} environment is useful for poems
where the line breaks are important. The lines are separated by
issuing a \ci{\bs} at the end of a line and an empty line after each
verse.


\begin{example}
I know only one English poem by
heart. It is about Humpty Dumpty.
\begin{FlushLeft}
\begin{verse}
Humpty Dumpty sat on a wall:\\
Humpty Dumpty had a great fall.\\
All the King's horses and all
the King's men\\
Couldn't put Humpty together
again.
\end{verse}
\end{FlushLeft}
\end{example}

\subsection{Abstract}

In scientific publications it is customary to start with an abstract which
gives the reader a quick overview of what to expect. \LaTeX{} provides the
\ei{abstract} environment for this purpose. Normally \ei{abstract} is used
in documents typeset with the article document class.

\newenvironment{abstract}%
{\begin{center}\begin{small}\begin{minipage}{0.8\textwidth}}%
        {\end{minipage}\end{small}\end{center}}
\begin{example}
\begin{abstract}
The abstract abstract.
\end{abstract}
\end{example}

\subsection{Printing Verbatim}

Text that is enclosed between \verb|\begin{|\ei{verbatim}\verb|}| and
\verb|\end{verbatim}| will be directly printed, as if typed on a
typewriter, with all line breaks and spaces, without any \LaTeX{}
command being executed.

Within a paragraph, similar behavior can be accessed with
\begin{lscommand}
  \ci{verb}\verb|+|\emph{text}\verb|+|
\end{lscommand}
\noindent The \verb|+| is just an example of a delimiter character. Use any
character except letters, \verb|*| or space. Many \LaTeX{} examples in this
booklet are typeset with this command.

\begin{example}
The \verb|\ldots| command \ldots

\begin{verbatim}
10 PRINT "HELLO WORLD ";
20 GOTO 10
\end{verbatim}
\end{example}

\begin{example}
\begin{verbatim*}
the starred version of
the      verbatim
environment emphasizes
the spaces   in the text
\end{verbatim*}
\end{example}

The \ci{verb} command can be used in a similar fashion with a star:

\begin{example}
\verb*|like   this :-) |
\end{example}

The \texttt{verbatim} environment and the \verb|\verb| command may not be used
within parameters of other commands.


\subsection{Tabular}

In \LaTeX{} the environment to typeset tables (and more) is called
\ei{tabular}. While it can be used on its own, the resulting table layouts look
extremely old fashioned. We recommend to add the \pai*{booktabs} package which
provides several commands that let you typeset beautiful modern looking tables.
To achieve some more advanced table layouts you will also learn about the
\pai*{longtable}, \pai*{array} and \pai*{multirow} packages in this section.
They are so useful, that you probably want to put them all into the preamble of
your document right away.

In addition to the description description of the commands, the \pai{booktabs}
package documentation~\cite{pack:booktabs} contains guidelines on typesetting
professional-looking tables. We have taken these guidelines to heart when
writing this booklet. You will find some of them in this section.

\subsubsection{Basic tables}\label{foo}

The environment \ei{tabular} has the following form
\begin{lscommand}
  \ei*{tabular}[pos:o ! colspec:m]
\end{lscommand} %
The \carg{colspec} argument, which stands for columns specifiers, defines the
format of the columns in the table. Use an \cargv{l} for a column of left-aligned text,
\cargv{r} for right-aligned text, and \cargv{c} for centred text. Inside the
environment use \ai{\&} to go to next cell within the row and
\ci{\textbackslash} to go to the next row.
\begin{example}
\begin{tabular}{lcr}
  left & centre & right \\
  1    & 2      & 3     \\
\end{tabular}
\end{example}
Note that the text inside the cells will not be wrapped. If you want the column
to contain justified text with linebreaks use the \cargv{p\{\carg{width}\}}
column specifier, where \carg{width} is the width of the column.
\begin{example}[examplewidth=0.43\linewidth]
\begin{tabular}{lrp{3cm}}
  left & right & Very long paragraph
                 that gets broken into
                 multiple lines. \\
  1    & 2     & Another one,
                 but shorter. \\
\end{tabular}
\end{example}

The optional \carg{pos} argument specifies the vertical position of the table
with respect to baseline of the text. There are three possible alignments:
\cargv{c} centres the table (the default), \cargv{t} matches the baseline of
the top row and \cargv{b} matches the baseline of the bottom row.
\begin{example}[examplewidth=0.55\linewidth]
text
\begin{tabular}{ll}
  1 & 2 \\
  3 & 4 \\
\end{tabular}
text
\begin{tabular}[t]{ll}
  1 & 2 \\
  3 & 4 \\
\end{tabular}
text
\begin{tabular}[b]{ll}
  1 & 2 \\
  3 & 4 \\
\end{tabular}
text
\end{example}


What we have shown so far allows aligning some items in rows and columns,
but real tables need visible headings. To insert them use the commands
\ci{toprule}, \ci{midrule} and \ci{bottomrule} from the \pai{booktabs} package.
All of these accept an optional argument that specifies their thickness, but
usually the default settings are just fine.
\begin{example}[examplewidth=0.43\linewidth]
\begin{tabular}{lcl}
  \toprule
  Alignment & Letter & Niceness  \\
  \midrule
  Left      & l      & Very nice \\
  Centre     & c      & Very nice \\
  Right     & r      & Very nice \\
  \bottomrule
\end{tabular}
\end{example}

With these commands you are already able to produce simple, yet nicely looking
tables. You may be are wondering why we have not mentioned how to add vertical
lines between the columns. Well, we did not mention them because the first rule
of producing professional-looking tables is that you \emph{must not} use
vertical lines.

The second rule is to never use double lines such as these:
\begin{chktexignore}
  \begin{example}[examplewidth=0.43\linewidth]
\begin{tabular}{lll}
  \toprule[0.1cm]
  \toprule
  Person      & Face & Table    \\
  \midrule
  \midrule
  Me          & :(   & Not nice \\
  You         & :[   & Awful    \\
  Your reader & :<   & Terrible \\
  \bottomrule
  \bottomrule[0.1cm]
\end{tabular}
\end{example}
\end{chktexignore}
As you can see the lines are already of different weight in order to signify
their meaning. Using more lines than is necessary means cluttering the space
without adding information. If you stick to these two rules your tables will
look quite good already.

To make the tables look even more sleek you may want to remove the padding in the
first and last column. To control the space between the columns use the
\cargv{@\{\carg{sep}\}} column specifier, where \carg{sep} is either text or
space. Space of arbitrary length can be inserted using the \ci{hspace}[width]
command. The contents of the \carg{sep} arguments will be put between cells in
the relevant column.
\begin{example}[examplewidth=0.3\linewidth]
\begin{tabular}{
  @{a} c @{\hspace{1cm}} c @{|} c @{ b}
}
  1 & 2 & 3 \\
  4 & 5 & 6\\
  7 & 8 & 9\\
\end{tabular}
\end{example}
If you leave the \carg{sep} empty it will suppress the padding between the
columns.
\begin{chktexignore}
  \begin{example}[examplewidth=0.43\linewidth]
\begin{tabular}{@{}lll@{}}
  \toprule
  Person      & Face & Table       \\
  \midrule
  Me          & :)   & Nice        \\
  You         & :]   & Sleek       \\
  Your reader & :>   & Informative \\
  \bottomrule
\end{tabular}
\end{example}
\end{chktexignore}

Sometimes it may make sense to group columns under one heading. To achieve this
we need two things: a way to group multiple heading columns and have a line
covering the same columns, to sit underneath the merged heading cell. Use the
\begin{lscommand}
  \ci*{multicolumn}[ncols:m ! colspec:m ! text:m]
\end{lscommand}
merge the cells. The \carg{ncols} argument indicates how many columns should
the \carg{text} span, while the \carg{colspec} is the column specification for
the new content---the same as when starting a \ei{tabular} environment.
\begin{chktexignore}
  \begin{example}[examplewidth=0.43\linewidth]
\begin{tabular}{@{}lll@{}}
  \toprule
  Person      & Face & Table       \\
  \midrule
  Me          & :)   & Nice        \\
  You         & :]   & Sleek       \\
  Your reader & \multicolumn{2}{c}{
                  Not available}   \\
  \bottomrule
\end{tabular}
\end{example}
\end{chktexignore}

To get a horizontal line to span multiple columns, use the command
\begin{lscommand}
  \ci*{cmidrule}[dim:o ! trim:p ! a--b:m]
\end{lscommand}
While the command uses nonstandard syntax for \carg{trim}, this is just an
optional argument with different pair of delimiters.\footnote{This syntax
  allows to specify the second optional argument without specifying the first,
  which would be impossible if square brackets were used for both.} The
\carg{dim} allows us to specify the thickness of the line. The \carg{trim}
argument accepts any combination of \cargv{r}, \cargv{r\{\carg{dim}\}},
\cargv{l} or \cargv{l\{\carg{dim}\}}. This allows you trim the rule from right
or left, either by the package default or the specified \carg{dim}. It is
usually recommended to trim the rules from the side where they touch other
columns. Finally the only required argument \carg{a--b} is the span of columns
to draw the line over.
\begin{chktexignore}
  \begin{example}[examplewidth=0.43\linewidth]
\begin{tabular}{@{}lll@{}}
  \toprule
              & \multicolumn{2}{c}{
                  Reaction}        \\
  \cmidrule(l){2-3}
  Person      & Face & Exclamation \\
  \midrule
  Me          & :)   & Nice        \\
  You         & :]   & Sleek       \\
  Your reader & \multicolumn{2}{c}{
                  Not available}   \\
  \bottomrule
\end{tabular}
\end{example}
\end{chktexignore}

If you need a cell to span multiple rows instead of columns, then you have to
use package \pai{multirow}. Its main command is a little more complicated
\begin{lscommand}
  \ci*{multirow}[vpos:o ! nrows:m ! width:m ! vmove:o ! text:m]
\end{lscommand}
The arguments are
\begin{description}
  \item[\carg{vpos}] is the vertical position of the text within the cell.
    Can be either \cargv{c} for centre (the default), \cargv{t} for top or
    \cargv{b} for bottom.
  \item[\carg{nrows}] is the number of rows for the new cell to span.
  \item[\carg{width}] is the width of the cell. Apart from a regular length,
    you can also pass two special arguments here: \cargv{*} for the natural
    length of the text and \cargv{=} for the same width as the column (this
    only makes sense if the column width was specified, for example via
    \cargv{p\{3cm\}}).
  \item[\carg{vmove}] allows adjusting the position of the text if it sits too
    low or too high.
  \item[\carg{text}] is the text to be put in the cell.
\end{description}
Unlike with \ci{multicolumn} you still have to write all the cells in remaining
rows, but they should be empty.
\begin{chktexignore}
  \begin{example}[examplewidth=0.4\linewidth]
\begin{tabular}{@{}lll@{}}
  \toprule
                & \multicolumn{2}{c}{
                    Reaction}        \\
  \cmidrule(l){2-3}
  Person        & Face & Exclamation \\
  \midrule
  \multirow[t]{
    2}{*}{VIPs} & :)   & Nice        \\
                & :]   & Sleek       \\
  Others        & \multicolumn{2}{c}{
                    Not available}   \\
  \bottomrule
\end{tabular}
\end{example}
\end{chktexignore}

In general it is not a good idea to use the \ci{multirow} command for showing
values common to multiple rows. Usually repeating the values in question makes
the table more readable.

When typesetting numerical data in the table, you may want to align it by
decimal point. A way to do this (and more) is described in
Section~\ref{sec:sitables}. The section also contains some guidelines about
typesetting numerical data in tables.

\subsubsection{Long tables}

Material typeset with the tabular environment always stays together on one
page. This poses a problem for especially long tables. If your table is not
very wide you may get away with it by typesetting its rows side by side. You
should then put a bigger space between those to indicate that these are
separate either by using \cargv{@\{...\}} or by putting an empty column between
those.
\begin{example}[examplewidth=0.4\linewidth]
\begin{tabular}{@{}cllcl@{}}
  \toprule
  Digit & Word  && Digit & Word  \\
  \midrule
  0     & Zero  && 5     & Five  \\
  1     & One   && 6     & Six   \\
  2     & Two   && 7     & Seven \\
  3     & Three && 8     & Eight \\
  4     & Four  && 9     & Nine  \\
  \bottomrule
\end{tabular}
\end{example}

This approach will obviously not work for \emph{really} long tables. This is
where the \pai{longtable} package shines. It defines a \ei{longtable}
environment that works similarly to \ei{tabular} environment, but allows
pagebreaks inside.

\begin{lscommand}
  \ei*{longtable}[align:o ! colspec:m]
\end{lscommand}
In contrast to \ei{tabular}, the \ei{longtable} always starts a new paragraph
and is centred by default. Thus the optional argument \carg{align} specifies
whether the table should be centred, on the left or on the right. Use
\cargv{c}, \cargv{l} and \cargv{r} to specify this. The \carg{colspec} argument
is the same as in the \ei{tabular} environment.

\begin{example}[standalone, to_page=2, paperwidth=4.5cm] 
%!hidebegin
\usepackage{longtable}
\usepackage{booktabs}
\begin{document}
%!hideend
\begin{longtable}{cl}
  \toprule
  Number & Word   \\
  \midrule
  0      & Zero   \\
  1      & One    \\
  2      & Two    \\
  % ...
%!hidebegin
  3      & Three \\
  4      & Four  \\
  5      & Five  \\
  6      & Six   \\
  7      & Seven \\
  8      & Eight \\
  9      & Nine  \\
  10     & Ten       \\
  11     & Eleven    \\
  12     & Twelve    \\
  13     & Thirteen  \\
  14     & Fourteen  \\
  15     & Fifteen   \\
  16     & Sixteen   \\
  17     & Seventeen \\
  18     & Eighteen  \\
  19     & Nineteen  \\
%!hideend
  20     & Twenty \\
  \bottomrule
\end{longtable}
\end{document} %!hide
\end{example}

Note that the pagebreaks are always placed between rows. If you have some tall
row thanks to \cargv{p\{...\}} specification, it will not broken.
\begin{example}[standalone, to_page=2, paperwidth=4.5cm] 
%!hidebegin
\usepackage{longtable}
\usepackage{booktabs}
\begin{document}
%!hideend
\begin{longtable}{
  cp{1cm}
}
  \toprule
  Number & Words  \\
  \midrule
  0      & Zero   \\
  1      & Multi
           paragraph
           text.

           It makes
           the table
           cell very
           tall.  \\
  2      & Two    \\
  \bottomrule
\end{longtable}
\end{document} %!hide
\end{example}

The \ei{longtable} environment defines also some additional commands that end
table rows. One of them is \ci{\textbackslash*} which, similarly to its
paragraph use, prohibits pagebreak after the row. Another useful commands are
\ci{endhead}, \ci{endfirsthead}, \ci{endfoot} and \ci{endlastfoot}. If you end
the row with them they will set the preceding rows as headers and footers of
the table. The \ci{endhead} and \ci{endfoot} put the headers and footers on
every page while \ci{endfirsthead} and \ci{endlastfoot} put them on the first
and last page. An example of using these commands is presented in
figure~\ref{ex:longtable}.
\begin{figure}[htp]
  \begin{example}[standalone, to_page=2, paperwidth=4.3cm] 
%!hidebegin
\usepackage{longtable}
\usepackage{booktabs}
\begin{document}
%!hideend
\begin{longtable}{cl}
  \toprule
  \multicolumn{2}{c}{
    V.~Important Table} \\
  Number & Word         \\
  \midrule \endfirsthead

  \toprule
  \multicolumn{2}{c}{
    VIT (continued)} \\
  Number & Word      \\
  \midrule \endhead

  \midrule
  \multicolumn{2}{c}{
    Not the end} \\
  \bottomrule \endfoot

  \midrule
  \multicolumn{2}{c}{
    The end of VIT} \\
  \bottomrule \endlastfoot

  0      & Zero   \\
  1      & One    \\
  % ...
%!hidebegin
  2      & Two     \\
  3      & Three \\
  4      & Four  \\
  5      & Five  \\
  6      & Six   \\
  7      & Seven \\
  8      & Eight \\
  9      & Nine  \\
  10     & Ten    \\
  11     & Eleven \\
  %!hideend
  12     & Twelve \\
\end{longtable}
\end{document} %!hide 
\end{example}
  \caption{An example of \ei{longtable} with running headers and footers.}\label{ex:longtable}
\end{figure}

Note that while you can use \ci{multicolumn} and \ci{multirow} normally within
the \ei{longtable} environment, the table may get very complicated and \LaTeX{}
will then need several passes to properly calculate the column widths.

\subsubsection{Advanced tables and non-tables}

In regular text you can specify the amount of space between two lines as an
optional argument to the \ci{\textbackslash} command. Can the same be done
within the table? It turns out that it can, but there is one caveat. If you use
it together with a \cargv{p\{...\}} column, the space specified will be different
depending on column order.
\begin{example}[standalone, paperheight=2.6cm]
\begin{document} %!hide
\noindent %!hide
\begin{tabular}{lp{1cm}}
  1 & 2\newline x \\[1cm]
  3 & 4           \\
\end{tabular}
\begin{tabular}{p{1cm}l}
  2\newline x & 1 \\[1cm]
  4           & 3 \\
\end{tabular} 
\end{document} %!hide
\end{example}
This counterintuitive behaviour is caused by the fact that the space to add is
calculated based on the last column. In order to prevent that simply add
\verb|\usepackage{array}| to your preamble. Since there are no downsides to
this, it is recommended to always use this package when starting a new document
to avoid breaking tables that rely on the original behaviour later. The
\pai{array} package also defines some additional column specifiers.

The \cargv{p\{...\}} specifier allows to insert text with linebreaks into the
table. The text always starts from the top though, so the \pai{array} package
defines two additional specifiers \cargv{m\{...\}} for vertically centred text
and \cargv{b\{...\}} for text put vertically at the bottom.
\begin{example}
\begin{tabular}{
  lp{1.4cm}m{1.4cm}b{1.4cm}
}
  Cell                 &
  Top matches cell.    &
  Centre matches cell. &
  Bottom matches cell. \\
\end{tabular}
\end{example}

When a column must be formatted a certain way it is inconvenient to put
the same commands in every cell. Moreover if you decide that something needs to
be changed about the formatting, then you would have to edit every cell
individually. To avoid that, the \pai{array} package defines
\cargv{>\{\carg{cmds}\}} and \cargv{<\{\carg{cmds}\}} column specifiers which
can be used to put some code before and after a column.
\begin{example}
\begin{tabular}{
  l
  >{\begin{em}}l<{\end{em}}
}
  normal text & emphasised text \\
  normal text & emphasised text \\
  normal text & emphasised text \\
\end{tabular}
\end{example}

Some environments change the meaning of the \ci{\textbackslash} command thus
making it unavailable to go to the next row. In such occasions you may use the
\ci{tabularnewline} command.
\begin{example}
\begin{tabular}{
  >{\begin{FlushLeft}}
    p{2cm}
  <{\end{FlushLeft}}
  >{\begin{FlushRight}}
    p{2cm}
  <{\end{FlushRight}}
}
  This cell will
    be flushed left. &
  This cell will
    be flushed right.
  \tabularnewline

  This \\ is newline &
  Here \\ too
  \tabularnewline
\end{tabular}
\end{example}

While using \cargv{>\{...\}} and \cargv{<\{...\}} comes handy if we only have
one such column, it quickly becomes inconvenient when many column of the same
type appear in any tables. In that case it may be desirable to use the command
\begin{lscommand}
  \ci*{newcolumntype}[newcolspec:m ! definition:m]
\end{lscommand}
where \carg{newcolspec} is a single letter used for specification of columns
and the \carg{definition} is what should be inserted in the table when using
it.
\begin{example}
\newcolumntype{e}{
  >{\begin{em}\begin{FlushLeft}}
  p{2.5cm}
  <{\end{FlushLeft}\end{em}}
}
\begin{tabular}{ee}
  This cell will
    be flushed left
    and emphasised. &
  This cell will
    be flushed left
    and emphasised.
  \tabularnewline

  This cell will
    be flushed left
    and emphasised. &
  This cell will
    be flushed left
    and emphasised.
  \tabularnewline
\end{tabular}
\end{example}

In order to create a tic-tac-toe grid you need to put some vertical and
horizontal lines of the same width. In order to do so you may use the
\cargv{|}~(vertical bar) column specifier for vertical rules and \ci{hline} for
horizontal rules.
\begin{chktexignore}
  \begin{example}
\begin{tabular}{c|c|c}
  O & X & O \\
  \hline
  X & X & O \\
  \hline
  X & O & X \\
\end{tabular}
\end{example}
\end{chktexignore}
In case your grid gets more complicated you may also need the \ci{cline}[a--b] %chktex 8
command which draws horizontal line that spans only over the specified rows.
\begin{chktexignore}
  \begin{example}[examplewidth=0.4\linewidth]
\begin{tabular}{|cccc|}
  \cline{4-4}
  a & a & \multicolumn{1}{c|}{a} & b \\
  \cline{2-3}
  a & \multicolumn{1}{|c}{b} & b & b \\
  \cline{2-2}
  a & a & \multicolumn{1}{|c}{b} & b \\
  \cline{1-2}
\end{tabular}
\end{example}
\end{chktexignore}

\section{Including Graphics and Images}\label{eps}

As explained in the previous section \LaTeX{} provides the facilities to work with floating bodies,
such as images or graphics, with the \texttt{figure} and
\texttt{table} environments.

A good set of commands for inclusion of graphics into these floating bodies is provided in the
\pai{graphicx} package by D.~P.~Carlisle. It is part of a whole family
of packages called the ``graphics''
bundle.\footnote{\CTAN|pkg/graphics|}

Use the following step by step guide to
include a picture into your document:

\begin{enumerate}
  \item Export the picture from your graphics program in EPS, PDF, PNG or JPEG format.
  \item If you exported your graphics as an EPS vector graphics, you have to convert it to PDF format
        prior to using it. There is a \texttt{epstopdf} command line tool that helps with this task.
        Note that it may be sensible to export EPS even though your software can export PDF too, as PDFs often are full page and will
        thus get very small when imported into a document. EPS on the other hand come with a bounding box showing the extent of the actual graphics.
  \item Load the \textsf{graphicx} package in the preamble of the input
        file with
        \begin{lscommand}
          \verb|\usepackage{graphicx}|
        \end{lscommand}
  \item Use the command
        \begin{lscommand}
          \ci{includegraphics}\verb|[|\emph{key}=\emph{value}, \ldots\verb|]{|\emph{file-name}\verb|}|
        \end{lscommand}
        \noindent to include \emph{file} into your document. The optional parameter
        accepts a comma separated list of \emph{keys} and associated
        \emph{values}. The \emph{keys} can be used to alter the width, height
        and rotation of the included graphic. Table~\ref{keyvals} lists the
        most important keys.
\end{enumerate}

\begin{table}[tb]
  \centering
  \caption{Key Names for \textsf{graphicx} Package.}%
  \label{keyvals}
  \begin{tabular}{@{}ll@{}}
    \toprule
    Key            & Effect                                \\
    \midrule
    \cargv{width}  & scale graphic to the specified width  \\
    \cargv{height} & scale graphic to the specified height \\
    \cargv{angle}  & rotate graphic counterclockwise       \\
    \cargv{scale}  & scale graphic                         \\
    \bottomrule
  \end{tabular}

  \bigskip
\end{table}

The example code in figure~\ref{figureex} on page~\pageref{figureex} may help to clarify things.
\begin{figure}
  \begin{lined}{11cm}
    \begin{verbatim}
\includegraphics[angle=90,width=\textwidth]{test.png}
\end{verbatim}
  \end{lined}
  \caption{Example code for including \texttt{test.png} into a document.\label{figureex}}
\end{figure}
It includes the graphic stored in the file \texttt{test.png}. The
graphic is \emph{first} rotated by an angle of 90 degrees and
\emph{then} scaled to the final width of 0.5 times the width of a
standard paragraph.  The aspect ratio is $1.0$, because no special
height is specified.  The width and height parameters can also be
specified in absolute dimensions. Refer to Table~\ref{units} on
page~\pageref{units} for more information. If you want to know more
about this topic, make sure to read~\cite{graphics}.

\section{Floating Bodies}
Today most publications contain a lot of figures and tables. These
elements need special treatment, because they cannot be broken across
pages.  One method would be to start a new page every time a figure or
a table is too large to fit on the present page. This approach would
leave pages partially empty, which looks very bad.

The solution to this problem is to `float' any figure or table that
does not fit on the current page to a later page, while filling the
current page with body text. \LaTeX{} offers two environments for
\wi{floating bodies}; one for tables and  one for figures.  To
take full advantage of these two environments it is important to
understand approximately how \LaTeX{} handles floats internally.
Otherwise floats may become a major source of frustration, because
\LaTeX{} never puts them where you want them to be.

\bigskip
Let's first have a look at the commands \LaTeX{} supplies
for floats:

Any material enclosed in a \ei{figure} or \ei{table} environment will
be treated as floating matter. Both float environments support an optional
parameter
\begin{lscommand}
  \verb|\begin{figure}[|\emph{placement specifier}\verb|]| or
  \verb|\begin{table}[|\ldots\verb|]|
\end{lscommand}
\noindent called the \emph{placement specifier}. This parameter
is used to tell \LaTeX{} about the locations to which the float
is allowed to be moved.  A \emph{placement specifier} is constructed by building a string
of \emph{float-placing permissions}. See Table~\ref{tab:permiss}.

\begin{table}[!bp]
  \begin{minipage}{\textwidth}
    \centering
    \caption{Float Placing Permissions.}\label{tab:permiss}
    \begin{tabular}{@{}cp{8cm}@{}}
      \toprule
      Spec       & Permission to place the float \ldots                                      \\
      \midrule
      \texttt{h} & \emph{here} at the very place in the text
      where it occurred.  This is useful mainly for small floats.                            \\[0.3ex]
      \texttt{t} & at the \emph{top} of a page                                               \\[0.3ex]
      \texttt{b} & at the \emph{bottom} of a page                                            \\[0.3ex]
      \texttt{p} & on a special \emph{page} containing only floats.                          \\[0.3ex]
      \texttt{!} & without considering most of the  internal parameters\footnote{Such as the
        maximum number of floats allowed  on one page.}, which could otherwise stop this
      float from being placed.                                                               \\
      \bottomrule
    \end{tabular}
  \end{minipage}
\end{table}

For example, a table could be started with the following line
\begin{code}
\verb|\begin{table}[!hbp]|
\end{code}
\noindent The \wi{placement specifier} \verb|[!hbp]| allows \LaTeX{} to
place the table right here (\texttt{h}) or at the bottom (\texttt{b})
of some page
or on a special floats page (\texttt{p}), and all this even if it does not
look that good (\texttt{!}). If no placement specifier is given, the standard
classes assume \verb|[tbp]|.

\LaTeX{} will place every float it encounters according to the
placement specifier supplied by the author. If a float cannot be
placed on the current page it is deferred either to the
\emph{figures} queue or the \emph{tables} queue.\footnote{These are FIFO---`first in first out'---queues!}  When a new page is started,
\LaTeX{} first checks if it is possible to fill a special `float'
page with floats from the queues. If this is not possible, the first
float on each queue is treated as if it had just occurred in the
text: \LaTeX{} tries again to place it according to its
respective placement specifiers (except `h,' which is no longer
possible).  Any new floats occurring in the text get placed into the
appropriate queues. \LaTeX{} strictly maintains the original order of
appearance for each type of float. That's why a figure that cannot
be placed pushes all further figures to the end of the document.
Therefore:

\begin{quote}
  If \LaTeX{} is not placing the floats as you expected,
  it is often only one float jamming one of the two float queues.
\end{quote}

While it is possible to give \LaTeX{}  single-location placement
specifiers, this causes problems.  If the float does not fit in the
location specified it becomes stuck, blocking subsequent floats.
In particular, you should never, ever use the [h] option---it is so bad
that in more recent versions of \LaTeX, it is automatically replaced by
  [ht].

\bigskip
\noindent Having explained the difficult bit, there are some more things to
mention about the \ei{table} and \ei{figure} environments.
Use the

\begin{lscommand}
  \ci{caption}\verb|{|\emph{caption text}\verb|}|
\end{lscommand}

\noindent command to define a caption for the float. A running number and
the string ``Figure'' or ``Table'' will be added by \LaTeX.

The two commands

\begin{lscommand}
  \ci{listoffigures} and \ci{listoftables}
\end{lscommand}

\noindent operate analogously to the \verb|\tableofcontents| command,
printing a list of figures or tables, respectively.  These lists will
display the whole caption, so if you tend to use long captions
you must have a shorter version of the caption for the lists.
This is accomplished by entering the short version in brackets after
the \verb|\caption| command.
\begin{code}
\verb|\caption[Short]{LLLLLoooooonnnnnggggg}|
\end{code}

Use \ci{label} and \ci{ref} to create a reference to a float within
your text. Note that the \ci{label} command must come \emph{after} the
\ci{caption} command since you want it to reference the number of the
caption.

The following example draws a square and inserts it into the
document. You could use this if you wanted to reserve space for images
you are going to paste into the finished document.

\begin{code}
\begin{verbatim}
Figure~\ref{white} is an example of Pop-Art.
\begin{figure}[!hbtp]
\includegraphics[angle=90,width=\textwidth]{wbox.pdf}
\caption{White Box by Peter Markus Paulian.\label{white}}
\end{figure}
\end{verbatim}
\end{code}

\noindent In the example above,
\LaTeX{} will try \emph{really hard}~(\texttt{!})\ to place the figure
right \emph{here}~(\texttt{h}).\footnote{assuming the figure queue is
  empty.} If this is not possible, it tries to place the figure at the
\emph{bottom}~(\texttt{b}) of the page.  Failing to place the figure
on the current page, it determines whether it is possible to create a float
page containing this figure and maybe some tables from the tables
queue. If there is not enough material for a special float page,
\LaTeX{} starts a new page, and once more treats the figure as if it
had just occurred in the text.

Under certain circumstances it might be necessary to use the

\begin{lscommand}
  \ci{clearpage} or even the \ci{cleardoublepage}
\end{lscommand}

\noindent command. It orders \LaTeX{} to immediately place all
floats remaining in the queues and then start a new
page. \ci{cleardoublepage} even goes to a new right-hand page.

\subsection{The \ei{longtable} environment}

Floating bodies occupy only a single page, thus putting \ei{longtable} into
them does not make sense. Still you may want to have the \ei{longtable} listed
in the list of tables with some caption. The \pai{longtable} package defines
its own \ci{caption} command that you may use inside the environment. Its use
is similar to the standard \ci{caption} command except that they are treated as
rows. If you pass empty optional argument to the \ci{caption} command it will
typeset normally but it won't be put in the list of tables, which is useful if
you want to have a running caption.

\begin{example}[standalone, to_page=2, paperwidth=4.1cm] 
%!hidebegin
\usepackage{longtable}
\usepackage{booktabs}

\begin{document}
%!hideend
\begin{longtable}{cl}
  \caption{Numbers} \\
  \toprule
  Number & Word         \\
  \midrule \endfirsthead

  \caption[]{(continued)} \\
  \toprule
  Number & Word      \\
  \midrule \endhead

  \bottomrule \endfoot
  \bottomrule \endlastfoot

  0      & Zero   \\
  1      & One    \\
  % ...
%!hidebegin
  2      & Two     \\
  3      & Three \\
  4      & Four  \\
  5      & Five  \\
  6      & Six   \\
  7      & Seven \\
  8      & Eight \\
  9      & Nine  \\
  10     & Ten    \\
  11     & Eleven \\
  %!hideend
  12     & Twelve \\
\end{longtable}
\end{document} %!hide 
\end{example}


% Local Variables:
% TeX-master: "lshort2e"
% mode: latex
% mode: flyspell
% End:
